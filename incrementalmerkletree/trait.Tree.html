<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A Merkle tree that supports incremental appends, witnessing of leaf nodes, checkpoints and rollbacks."><title>Tree in incrementalmerkletree - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-b0742ba02757f159.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="incrementalmerkletree" data-themes="" data-resource-suffix="" data-rustdoc-version="1.84.0-nightly (9322d183f 2024-10-14)" data-channel="nightly" data-search-js="search-e056c65ede92db13.js" data-settings-js="settings-805db61a62df4bd2.js" ><script src="../static.files/storage-1d39b6787ed640ff.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-f070b9041d14864c.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-0111fcff984fae8f.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../incrementalmerkletree/index.html">incrementalmerkletree</a><span class="version">0.3.1</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Tree</a></h2><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.append" title="append">append</a></li><li><a href="#tymethod.authentication_path" title="authentication_path">authentication_path</a></li><li><a href="#tymethod.checkpoint" title="checkpoint">checkpoint</a></li><li><a href="#tymethod.current_leaf" title="current_leaf">current_leaf</a></li><li><a href="#tymethod.current_position" title="current_position">current_position</a></li><li><a href="#tymethod.garbage_collect" title="garbage_collect">garbage_collect</a></li><li><a href="#tymethod.get_witnessed_leaf" title="get_witnessed_leaf">get_witnessed_leaf</a></li><li><a href="#tymethod.remove_witness" title="remove_witness">remove_witness</a></li><li><a href="#tymethod.rewind" title="rewind">rewind</a></li><li><a href="#tymethod.root" title="root">root</a></li><li><a href="#tymethod.witness" title="witness">witness</a></li><li><a href="#tymethod.witnessed_positions" title="witnessed_positions">witnessed_positions</a></li></ul><h3><a href="#implementors">Implementors</a></h3></section><div id="rustdoc-modnav"><h2 class="in-crate"><a href="index.html">In crate incrementalmerkletree</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><span class="rustdoc-breadcrumbs"><a href="index.html">incrementalmerkletree</a></span><h1>Trait <span class="trait">Tree</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/incrementalmerkletree/lib.rs.html#235-296">source</a> </span></div><pre class="rust item-decl"><code>pub trait Tree&lt;H&gt; {
    // Required methods
    fn <a href="#tymethod.append" class="fn">append</a>(&amp;mut self, value: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;H</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.current_position" class="fn">current_position</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="struct.Position.html" title="struct incrementalmerkletree::Position">Position</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.current_leaf" class="fn">current_leaf</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;H</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.get_witnessed_leaf" class="fn">get_witnessed_leaf</a>(&amp;self, position: <a class="struct" href="struct.Position.html" title="struct incrementalmerkletree::Position">Position</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;H</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.witness" class="fn">witness</a>(&amp;mut self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="struct.Position.html" title="struct incrementalmerkletree::Position">Position</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.witnessed_positions" class="fn">witnessed_positions</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/collections/btree/set/struct.BTreeSet.html" title="struct alloc::collections::btree::set::BTreeSet">BTreeSet</a>&lt;<a class="struct" href="struct.Position.html" title="struct incrementalmerkletree::Position">Position</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.root" class="fn">root</a>(&amp;self, checkpoint_depth: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;H&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.authentication_path" class="fn">authentication_path</a>(
        &amp;self,
        position: <a class="struct" href="struct.Position.html" title="struct incrementalmerkletree::Position">Position</a>,
        as_of_root: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;H</a>,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;H&gt;&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.remove_witness" class="fn">remove_witness</a>(&amp;mut self, position: <a class="struct" href="struct.Position.html" title="struct incrementalmerkletree::Position">Position</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.checkpoint" class="fn">checkpoint</a>(&amp;mut self);
<span class="item-spacer"></span>    fn <a href="#tymethod.rewind" class="fn">rewind</a>(&amp;mut self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.garbage_collect" class="fn">garbage_collect</a>(&amp;mut self);
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A Merkle tree that supports incremental appends, witnessing of
leaf nodes, checkpoints and rollbacks.</p>
</div></details><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">ยง</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.append" class="method"><a class="src rightside" href="../src/incrementalmerkletree/lib.rs.html#239">source</a><h4 class="code-header">fn <a href="#tymethod.append" class="fn">append</a>(&amp;mut self, value: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;H</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>Appends a new value to the tree at the next available slot.
Returns true if successful and false if the tree would exceed
the maximum allowed depth.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.current_position" class="method"><a class="src rightside" href="../src/incrementalmerkletree/lib.rs.html#242">source</a><h4 class="code-header">fn <a href="#tymethod.current_position" class="fn">current_position</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="struct.Position.html" title="struct incrementalmerkletree::Position">Position</a>&gt;</h4></section></summary><div class="docblock"><p>Returns the most recently appended leaf value.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.current_leaf" class="method"><a class="src rightside" href="../src/incrementalmerkletree/lib.rs.html#245">source</a><h4 class="code-header">fn <a href="#tymethod.current_leaf" class="fn">current_leaf</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;H</a>&gt;</h4></section></summary><div class="docblock"><p>Returns the most recently appended leaf value.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.get_witnessed_leaf" class="method"><a class="src rightside" href="../src/incrementalmerkletree/lib.rs.html#249">source</a><h4 class="code-header">fn <a href="#tymethod.get_witnessed_leaf" class="fn">get_witnessed_leaf</a>(&amp;self, position: <a class="struct" href="struct.Position.html" title="struct incrementalmerkletree::Position">Position</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;H</a>&gt;</h4></section></summary><div class="docblock"><p>Returns the leaf at the specified position if the tree can produce
an authentication path for it.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.witness" class="method"><a class="src rightside" href="../src/incrementalmerkletree/lib.rs.html#255">source</a><h4 class="code-header">fn <a href="#tymethod.witness" class="fn">witness</a>(&amp;mut self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="struct.Position.html" title="struct incrementalmerkletree::Position">Position</a>&gt;</h4></section></summary><div class="docblock"><p>Marks the current leaf as one for which weโre interested in producing
an authentication path. Returns an optional value containing the
current position if successful or if the current value was already
marked, or None if the tree is empty.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.witnessed_positions" class="method"><a class="src rightside" href="../src/incrementalmerkletree/lib.rs.html#258">source</a><h4 class="code-header">fn <a href="#tymethod.witnessed_positions" class="fn">witnessed_positions</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/collections/btree/set/struct.BTreeSet.html" title="struct alloc::collections::btree::set::BTreeSet">BTreeSet</a>&lt;<a class="struct" href="struct.Position.html" title="struct incrementalmerkletree::Position">Position</a>&gt;</h4></section></summary><div class="docblock"><p>Return a set of all the positions for which we have witnessed.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.root" class="method"><a class="src rightside" href="../src/incrementalmerkletree/lib.rs.html#264">source</a><h4 class="code-header">fn <a href="#tymethod.root" class="fn">root</a>(&amp;self, checkpoint_depth: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;H&gt;</h4></section></summary><div class="docblock"><p>Obtains the root of the Merkle tree at the specified checkpoint depth
by hashing against empty nodes up to the maximum height of the tree.
Returns <code>None</code> if there are not enough checkpoints available to reach the
requested checkpoint depth.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.authentication_path" class="method"><a class="src rightside" href="../src/incrementalmerkletree/lib.rs.html#271">source</a><h4 class="code-header">fn <a href="#tymethod.authentication_path" class="fn">authentication_path</a>(
    &amp;self,
    position: <a class="struct" href="struct.Position.html" title="struct incrementalmerkletree::Position">Position</a>,
    as_of_root: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;H</a>,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;H&gt;&gt;</h4></section></summary><div class="docblock"><p>Obtains an authentication path to the value at the specified position,
as of the tree state corresponding to the given root.
Returns <code>None</code> if there is no available authentication path to that
position or if the root does not correspond to a checkpointed
root of the tree.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.remove_witness" class="method"><a class="src rightside" href="../src/incrementalmerkletree/lib.rs.html#276">source</a><h4 class="code-header">fn <a href="#tymethod.remove_witness" class="fn">remove_witness</a>(&amp;mut self, position: <a class="struct" href="struct.Position.html" title="struct incrementalmerkletree::Position">Position</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>Marks the value at the specified position as a value weโre no longer
interested in maintaining a witness for. Returns true if successful and
false if we were already not maintaining a witness at this position.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.checkpoint" class="method"><a class="src rightside" href="../src/incrementalmerkletree/lib.rs.html#281">source</a><h4 class="code-header">fn <a href="#tymethod.checkpoint" class="fn">checkpoint</a>(&amp;mut self)</h4></section></summary><div class="docblock"><p>Creates a new checkpoint for the current tree state. It is valid to
have multiple checkpoints for the same tree state, and each <code>rewind</code>
call will remove a single checkpoint.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.rewind" class="method"><a class="src rightside" href="../src/incrementalmerkletree/lib.rs.html#288">source</a><h4 class="code-header">fn <a href="#tymethod.rewind" class="fn">rewind</a>(&amp;mut self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>Rewinds the tree state to the previous checkpoint, and then removes
that checkpoint record. If there are multiple checkpoints at a given
tree state, the tree state will not be altered until all checkpoints
at that tree state have been removed using <code>rewind</code>. This function
return false and leave the tree unmodified if no checkpoints exist.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.garbage_collect" class="method"><a class="src rightside" href="../src/incrementalmerkletree/lib.rs.html#295">source</a><h4 class="code-header">fn <a href="#tymethod.garbage_collect" class="fn">garbage_collect</a>(&amp;mut self)</h4></section></summary><div class="docblock"><p>Remove state from the tree that no longer needs to be maintained
because it is associated with checkpoints or witnesses that
have been removed from the tree at positions deeper than those
reachable by calls to <code>rewind</code>. It is always safe to implement
this as a no-op operation</p>
</div></details></div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">ยง</a></h2><div id="implementors-list"><section id="impl-Tree%3CH%3E-for-BridgeTree%3CH,+DEPTH%3E" class="impl"><a class="src rightside" href="../src/incrementalmerkletree/bridgetree.rs.html#923-1292">source</a><a href="#impl-Tree%3CH%3E-for-BridgeTree%3CH,+DEPTH%3E" class="anchor">ยง</a><h3 class="code-header">impl&lt;H: <a class="trait" href="trait.Hashable.html" title="trait incrementalmerkletree::Hashable">Hashable</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/cmp/trait.Ord.html" title="trait core::cmp::Ord">Ord</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a>, const DEPTH: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a>&gt; <a class="trait" href="trait.Tree.html" title="trait incrementalmerkletree::Tree">Tree</a>&lt;H&gt; for <a class="struct" href="bridgetree/struct.BridgeTree.html" title="struct incrementalmerkletree::bridgetree::BridgeTree">BridgeTree</a>&lt;H, DEPTH&gt;</h3></section></div><script src="../trait.impl/incrementalmerkletree/trait.Tree.js" async></script></section></div></main></body></html>