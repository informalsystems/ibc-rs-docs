<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A lazy collection of storage values."><title>LazyCollection in namada_proof_of_stake - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-b0742ba02757f159.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="namada_proof_of_stake" data-themes="" data-resource-suffix="" data-rustdoc-version="1.84.0-nightly (9322d183f 2024-10-14)" data-channel="nightly" data-search-js="search-e056c65ede92db13.js" data-settings-js="settings-805db61a62df4bd2.js" ><script src="../static.files/storage-1d39b6787ed640ff.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-f070b9041d14864c.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-0111fcff984fae8f.css"></noscript><link rel="icon" href="https://dev.namada.net/master/favicon.png"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button><a class="logo-container" href="../namada_proof_of_stake/index.html"><img src="https://dev.namada.net/master/rustdoc-logo.png" alt=""></a></nav><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../namada_proof_of_stake/index.html"><img src="https://dev.namada.net/master/rustdoc-logo.png" alt="logo"></a><h2><a href="../namada_proof_of_stake/index.html">namada_<wbr>proof_<wbr>of_<wbr>stake</a><span class="version">0.47.2</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Lazy<wbr>Collection</a></h2><h3><a href="#required-associated-types">Required Associated Types</a></h3><ul class="block"><li><a href="#associatedtype.SubKey" title="SubKey">SubKey</a></li><li><a href="#associatedtype.Value" title="Value">Value</a></li></ul><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.is_data_sub_key" title="is_data_sub_key">is_data_sub_key</a></li><li><a href="#tymethod.is_valid_sub_key" title="is_valid_sub_key">is_valid_sub_key</a></li><li><a href="#tymethod.open" title="open">open</a></li></ul><h3><a href="#object-safety">Object Safety</a></h3><h3><a href="#implementors">Implementors</a></h3></section><div id="rustdoc-modnav"><h2 class="in-crate"><a href="index.html">In crate namada_<wbr>proof_<wbr>of_<wbr>stake</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><span class="rustdoc-breadcrumbs"><a href="index.html">namada_proof_of_stake</a></span><h1>Trait <span class="trait">LazyCollection</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/namada_storage/collections/mod.rs.html#50">source</a> </span></div><pre class="rust item-decl"><code>pub trait LazyCollection {
    type <a href="#associatedtype.SubKey" class="associatedtype">SubKey</a>: <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a>;
    type <a href="#associatedtype.Value" class="associatedtype">Value</a>: <a class="trait" href="../borsh/de/trait.BorshDeserialize.html" title="trait borsh::de::BorshDeserialize">BorshDeserialize</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a>;

    // Required methods
    fn <a href="#tymethod.open" class="fn">open</a>(key: <a class="struct" href="struct.Key.html" title="struct namada_proof_of_stake::Key">Key</a>) -&gt; Self;
<span class="item-spacer"></span>    fn <a href="#tymethod.is_valid_sub_key" class="fn">is_valid_sub_key</a>(&amp;self, key: &amp;<a class="struct" href="struct.Key.html" title="struct namada_proof_of_stake::Key">Key</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;Self::<a class="associatedtype" href="trait.LazyCollection.html#associatedtype.SubKey" title="type namada_proof_of_stake::LazyCollection::SubKey">SubKey</a>&gt;, <a class="enum" href="enum.Error.html" title="enum namada_proof_of_stake::Error">Error</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.is_data_sub_key" class="fn">is_data_sub_key</a>(&amp;self, key: &amp;<a class="struct" href="struct.Key.html" title="struct namada_proof_of_stake::Key">Key</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>;
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A lazy collection of storage values.</p>
<p>This is a handler with some storage prefix that is given to its <code>fn new()</code>.
The values are typically nested under this prefix and they can be changed
individually (e.g. without reading in the whole collection) and their
changes directly indicated to the validity predicates, which do not need to
iterate the whole collection pre/post to find diffs.</p>
<p>An empty collection must be deleted from storage.</p>
</div></details><h2 id="required-associated-types" class="section-header">Required Associated Types<a href="#required-associated-types" class="anchor">§</a></h2><div class="methods"><details class="toggle" open><summary><section id="associatedtype.SubKey" class="method"><a class="src rightside" href="../src/namada_storage/collections/mod.rs.html#52">source</a><h4 class="code-header">type <a href="#associatedtype.SubKey" class="associatedtype">SubKey</a>: <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a></h4></section></summary><div class="docblock"><p>Possible sub-keys in the collection</p>
</div></details><details class="toggle" open><summary><section id="associatedtype.Value" class="method"><a class="src rightside" href="../src/namada_storage/collections/mod.rs.html#55">source</a><h4 class="code-header">type <a href="#associatedtype.Value" class="associatedtype">Value</a>: <a class="trait" href="../borsh/de/trait.BorshDeserialize.html" title="trait borsh::de::BorshDeserialize">BorshDeserialize</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a></h4></section></summary><div class="docblock"><p>A type of a value in the inner-most collection</p>
</div></details></div><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.open" class="method"><a class="src rightside" href="../src/namada_storage/collections/mod.rs.html#58">source</a><h4 class="code-header">fn <a href="#tymethod.open" class="fn">open</a>(key: <a class="struct" href="struct.Key.html" title="struct namada_proof_of_stake::Key">Key</a>) -&gt; Self</h4></section></summary><div class="docblock"><p>Create or use an existing vector with the given storage <code>key</code>.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.is_valid_sub_key" class="method"><a class="src rightside" href="../src/namada_storage/collections/mod.rs.html#65-68">source</a><h4 class="code-header">fn <a href="#tymethod.is_valid_sub_key" class="fn">is_valid_sub_key</a>(&amp;self, key: &amp;<a class="struct" href="struct.Key.html" title="struct namada_proof_of_stake::Key">Key</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;Self::<a class="associatedtype" href="trait.LazyCollection.html#associatedtype.SubKey" title="type namada_proof_of_stake::LazyCollection::SubKey">SubKey</a>&gt;, <a class="enum" href="enum.Error.html" title="enum namada_proof_of_stake::Error">Error</a>&gt;</h4></section></summary><div class="docblock"><p>Check if the given storage key is a valid LazyVec sub-key and if so
return which one. Returns:</p>
<ul>
<li><code>Ok(Some(_))</code> if it’s a valid sub-key</li>
<li><code>Ok(None)</code> if it’s not a sub-key</li>
<li><code>Err(_)</code> if it’s an invalid sub-key</li>
</ul>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.is_data_sub_key" class="method"><a class="src rightside" href="../src/namada_storage/collections/mod.rs.html#75">source</a><h4 class="code-header">fn <a href="#tymethod.is_data_sub_key" class="fn">is_data_sub_key</a>(&amp;self, key: &amp;<a class="struct" href="struct.Key.html" title="struct namada_proof_of_stake::Key">Key</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>Check if the given storage key is a valid data key.</p>
<p>For most collections, this is the same as <code>is_valid_sub_key</code>, but for
example for <code>LazyVec</code>, which has an additional sub-key for length of the
vec, only the element data sub-keys would return <code>true</code>.</p>
</div></details></div><h2 id="object-safety" class="section-header">Object Safety<a href="#object-safety" class="anchor">§</a></h2><div class="object-safety-info">This trait is <b>not</b> <a href="https://doc.rust-lang.org/nightly/reference/items/traits.html#object-safety">object safe</a>.</div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"><details class="toggle implementors-toggle"><summary><section id="impl-LazyCollection-for-LazySet%3CK%3E" class="impl"><a class="src rightside" href="../src/namada_storage/collections/lazy_set.rs.html#46-48">source</a><a href="#impl-LazyCollection-for-LazySet%3CK%3E" class="anchor">§</a><h3 class="code-header">impl&lt;K&gt; <a class="trait" href="trait.LazyCollection.html" title="trait namada_proof_of_stake::LazyCollection">LazyCollection</a> for <a class="struct" href="struct.LazySet.html" title="struct namada_proof_of_stake::LazySet">LazySet</a>&lt;K&gt;<div class="where">where
    K: <a class="trait" href="trait.KeySeg.html" title="trait namada_proof_of_stake::KeySeg">KeySeg</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a>,</div></h3></section></summary><div class="impl-items"><section id="associatedtype.SubKey-1" class="associatedtype trait-impl"><a class="src rightside" href="../src/namada_storage/collections/lazy_set.rs.html#50">source</a><a href="#associatedtype.SubKey-1" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.SubKey" class="associatedtype">SubKey</a> = <a class="enum" href="lazy_set/enum.SubKey.html" title="enum namada_proof_of_stake::lazy_set::SubKey">SubKey</a>&lt;K&gt;</h4></section><section id="associatedtype.Value-1" class="associatedtype trait-impl"><a class="src rightside" href="../src/namada_storage/collections/lazy_set.rs.html#51">source</a><a href="#associatedtype.Value-1" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.Value" class="associatedtype">Value</a> = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a></h4></section></div></details><details class="toggle implementors-toggle"><summary><section id="impl-LazyCollection-for-LazyMap%3CK,+V%3E" class="impl"><a class="src rightside" href="../src/namada_storage/collections/lazy_map.rs.html#216-219">source</a><a href="#impl-LazyCollection-for-LazyMap%3CK,+V%3E" class="anchor">§</a><h3 class="code-header">impl&lt;K, V&gt; <a class="trait" href="trait.LazyCollection.html" title="trait namada_proof_of_stake::LazyCollection">LazyCollection</a> for <a class="struct" href="struct.LazyMap.html" title="struct namada_proof_of_stake::LazyMap">LazyMap</a>&lt;K, V&gt;<div class="where">where
    K: <a class="trait" href="trait.KeySeg.html" title="trait namada_proof_of_stake::KeySeg">KeySeg</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a>,
    V: <a class="trait" href="../borsh/de/trait.BorshDeserialize.html" title="trait borsh::de::BorshDeserialize">BorshDeserialize</a> + <a class="trait" href="../borsh/ser/trait.BorshSerialize.html" title="trait borsh::ser::BorshSerialize">BorshSerialize</a> + 'static + <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a>,</div></h3></section></summary><div class="impl-items"><section id="associatedtype.SubKey-2" class="associatedtype trait-impl"><a class="src rightside" href="../src/namada_storage/collections/lazy_map.rs.html#221">source</a><a href="#associatedtype.SubKey-2" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.SubKey" class="associatedtype">SubKey</a> = <a class="enum" href="lazy_map/enum.SubKey.html" title="enum namada_proof_of_stake::lazy_map::SubKey">SubKey</a>&lt;K&gt;</h4></section><section id="associatedtype.Value-2" class="associatedtype trait-impl"><a class="src rightside" href="../src/namada_storage/collections/lazy_map.rs.html#222">source</a><a href="#associatedtype.Value-2" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.Value" class="associatedtype">Value</a> = V</h4></section></div></details><details class="toggle implementors-toggle"><summary><section id="impl-LazyCollection-for-LazyMap%3CK,+V,+Nested%3E" class="impl"><a class="src rightside" href="../src/namada_storage/collections/lazy_map.rs.html#129-132">source</a><a href="#impl-LazyCollection-for-LazyMap%3CK,+V,+Nested%3E" class="anchor">§</a><h3 class="code-header">impl&lt;K, V&gt; <a class="trait" href="trait.LazyCollection.html" title="trait namada_proof_of_stake::LazyCollection">LazyCollection</a> for <a class="struct" href="struct.LazyMap.html" title="struct namada_proof_of_stake::LazyMap">LazyMap</a>&lt;K, V, <a class="struct" href="../namada_storage/collections/struct.Nested.html" title="struct namada_storage::collections::Nested">Nested</a>&gt;<div class="where">where
    K: <a class="trait" href="trait.KeySeg.html" title="trait namada_proof_of_stake::KeySeg">KeySeg</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/hash/trait.Hash.html" title="trait core::hash::Hash">Hash</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/cmp/trait.Eq.html" title="trait core::cmp::Eq">Eq</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a>,
    V: <a class="trait" href="trait.LazyCollection.html" title="trait namada_proof_of_stake::LazyCollection">LazyCollection</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a>,</div></h3></section></summary><div class="impl-items"><section id="associatedtype.SubKey-3" class="associatedtype trait-impl"><a class="src rightside" href="../src/namada_storage/collections/lazy_map.rs.html#134">source</a><a href="#associatedtype.SubKey-3" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.SubKey" class="associatedtype">SubKey</a> = <a class="enum" href="lazy_map/enum.NestedSubKey.html" title="enum namada_proof_of_stake::lazy_map::NestedSubKey">NestedSubKey</a>&lt;K, &lt;V as <a class="trait" href="trait.LazyCollection.html" title="trait namada_proof_of_stake::LazyCollection">LazyCollection</a>&gt;::<a class="associatedtype" href="trait.LazyCollection.html#associatedtype.SubKey" title="type namada_proof_of_stake::LazyCollection::SubKey">SubKey</a>&gt;</h4></section><section id="associatedtype.Value-3" class="associatedtype trait-impl"><a class="src rightside" href="../src/namada_storage/collections/lazy_map.rs.html#135">source</a><a href="#associatedtype.Value-3" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.Value" class="associatedtype">Value</a> = &lt;V as <a class="trait" href="trait.LazyCollection.html" title="trait namada_proof_of_stake::LazyCollection">LazyCollection</a>&gt;::<a class="associatedtype" href="trait.LazyCollection.html#associatedtype.Value" title="type namada_proof_of_stake::LazyCollection::Value">Value</a></h4></section></div></details><details class="toggle implementors-toggle"><summary><section id="impl-LazyCollection-for-LazyVec%3CT%3E" class="impl"><a class="src rightside" href="../src/namada_storage/collections/lazy_vec.rs.html#77-79">source</a><a href="#impl-LazyCollection-for-LazyVec%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="trait.LazyCollection.html" title="trait namada_proof_of_stake::LazyCollection">LazyCollection</a> for <a class="struct" href="struct.LazyVec.html" title="struct namada_proof_of_stake::LazyVec">LazyVec</a>&lt;T&gt;<div class="where">where
    T: <a class="trait" href="../borsh/ser/trait.BorshSerialize.html" title="trait borsh::ser::BorshSerialize">BorshSerialize</a> + <a class="trait" href="../borsh/de/trait.BorshDeserialize.html" title="trait borsh::de::BorshDeserialize">BorshDeserialize</a> + 'static + <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a>,</div></h3></section></summary><div class="impl-items"><section id="associatedtype.SubKey-4" class="associatedtype trait-impl"><a class="src rightside" href="../src/namada_storage/collections/lazy_vec.rs.html#81">source</a><a href="#associatedtype.SubKey-4" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.SubKey" class="associatedtype">SubKey</a> = <a class="enum" href="lazy_vec/enum.SubKey.html" title="enum namada_proof_of_stake::lazy_vec::SubKey">SubKey</a></h4></section><section id="associatedtype.Value-4" class="associatedtype trait-impl"><a class="src rightside" href="../src/namada_storage/collections/lazy_vec.rs.html#82">source</a><a href="#associatedtype.Value-4" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.Value" class="associatedtype">Value</a> = T</h4></section></div></details></div><script src="../trait.impl/namada_storage/collections/trait.LazyCollection.js" data-ignore-extern-crates="namada_storage" async></script></section></div></main></body></html>