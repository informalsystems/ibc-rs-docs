<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A persistent vector."><title>im::vector - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-b0742ba02757f159.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="im" data-themes="" data-resource-suffix="" data-rustdoc-version="1.84.0-nightly (9322d183f 2024-10-14)" data-channel="nightly" data-search-js="search-e056c65ede92db13.js" data-settings-js="settings-805db61a62df4bd2.js" ><script src="../../static.files/storage-1d39b6787ed640ff.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../static.files/main-f070b9041d14864c.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-0111fcff984fae8f.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../im/index.html">im</a><span class="version">15.1.0</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Module vector</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#performance-notes" title="Performance Notes">Performance Notes</a></li></ul><h3><a href="#structs">Module Items</a></h3><ul class="block"><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#enums" title="Enums">Enums</a></li></ul></section><div id="rustdoc-modnav"><h2 class="in-crate"><a href="../index.html">In crate im</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><span class="rustdoc-breadcrumbs"><a href="../index.html">im</a></span><h1>Module <span>vector</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/im/vector/mod.rs.html#5-2745">source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A persistent vector.</p>
<p>This is a sequence of elements in insertion order - if you need a
list of things, any kind of list of things, this is what you’re
looking for.</p>
<p>It’s implemented as an <a href="https://infoscience.epfl.ch/record/213452/files/rrbvector.pdf">RRB vector</a> with <a href="http://deepsea.inria.fr/pasl/chunkedseq.pdf">smart
head/tail chunking</a>. In performance terms, this means
that practically every operation is O(log n), except push/pop on
both sides, which will be O(1) amortised, and O(log n) in the
worst case. In practice, the push/pop operations will be
blindingly fast, nearly on par with the native
<a href="https://doc.rust-lang.org/std/collections/struct.VecDeque.html"><code>VecDeque</code></a>, and other operations will have decent, if
not high, performance, but they all have more or less the same
O(log n) complexity, so you don’t need to keep their performance
characteristics in mind - everything, even splitting and merging,
is safe to use and never too slow.</p>
<h3 id="performance-notes"><a class="doc-anchor" href="#performance-notes">§</a>Performance Notes</h3>
<p>Because of the head/tail chunking technique, until you push a
number of items above double the tree’s branching factor (that’s
<code>self.len()</code> = 2 × <em>k</em> (where <em>k</em> = 64) = 128) on either side, the
data structure is still just a handful of arrays, not yet an RRB
tree, so you’ll see performance and memory characteristics fairly
close to <a href="https://doc.rust-lang.org/std/vec/struct.Vec.html"><code>Vec</code></a> or <a href="https://doc.rust-lang.org/std/collections/struct.VecDeque.html"><code>VecDeque</code></a>.</p>
<p>This means that the structure always preallocates four chunks of
size <em>k</em> (<em>k</em> being the tree’s branching factor), equivalent to a
<a href="https://doc.rust-lang.org/std/vec/struct.Vec.html"><code>Vec</code></a> with an initial capacity of 256. Beyond that, it will
allocate tree nodes of capacity <em>k</em> as needed.</p>
<p>In addition, vectors start out as single chunks, and only expand into the
full data structure once you go past the chunk size. This makes them
perform identically to <a href="https://doc.rust-lang.org/std/vec/struct.Vec.html"><code>Vec</code></a> at small sizes.</p>
</div></details><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.Chunks.html" title="struct im::vector::Chunks">Chunks</a></div><div class="desc docblock-short">An iterator over the leaf nodes of a vector.</div></li><li><div class="item-name"><a class="struct" href="struct.ChunksMut.html" title="struct im::vector::ChunksMut">Chunks<wbr>Mut</a></div><div class="desc docblock-short">A mutable iterator over the leaf nodes of a vector.</div></li><li><div class="item-name"><a class="struct" href="struct.ConsumingIter.html" title="struct im::vector::ConsumingIter">Consuming<wbr>Iter</a></div><div class="desc docblock-short">A consuming iterator over vectors with values of type <code>A</code>.</div></li><li><div class="item-name"><a class="struct" href="struct.Iter.html" title="struct im::vector::Iter">Iter</a></div><div class="desc docblock-short">An iterator over vectors with values of type <code>A</code>.</div></li><li><div class="item-name"><a class="struct" href="struct.IterMut.html" title="struct im::vector::IterMut">IterMut</a></div><div class="desc docblock-short">A mutable iterator over vectors with values of type <code>A</code>.</div></li><li><div class="item-name"><a class="struct" href="struct.RRBPool.html" title="struct im::vector::RRBPool">RRBPool</a></div><div class="desc docblock-short">A memory pool for <code>Vector</code>.</div></li><li><div class="item-name"><a class="struct" href="struct.Vector.html" title="struct im::vector::Vector">Vector</a></div><div class="desc docblock-short">A persistent vector.</div></li></ul><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.Focus.html" title="enum im::vector::Focus">Focus</a></div><div class="desc docblock-short">Focused indexing over a <a href="enum.Vector.html"><code>Vector</code></a>.</div></li><li><div class="item-name"><a class="enum" href="enum.FocusMut.html" title="enum im::vector::FocusMut">Focus<wbr>Mut</a></div><div class="desc docblock-short">A mutable version of <a href="enum.Focus.html"><code>Focus</code></a>.</div></li></ul></section></div></main></body></html>