<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Ledger’s state storage with key-value backed store and a merkle tree"><title>namada_state - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-b0742ba02757f159.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="namada_state" data-themes="" data-resource-suffix="" data-rustdoc-version="1.84.0-nightly (9322d183f 2024-10-14)" data-channel="nightly" data-search-js="search-e056c65ede92db13.js" data-settings-js="settings-805db61a62df4bd2.js" ><script src="../static.files/storage-1d39b6787ed640ff.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-f070b9041d14864c.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-0111fcff984fae8f.css"></noscript><link rel="icon" href="https://dev.namada.net/master/favicon.png"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button><a class="logo-container" href="../namada_state/index.html"><img src="https://dev.namada.net/master/rustdoc-logo.png" alt=""></a></nav><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../namada_state/index.html"><img src="https://dev.namada.net/master/rustdoc-logo.png" alt="logo"></a><h2><a href="../namada_state/index.html">namada_<wbr>state</a><span class="version">0.47.1</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section id="rustdoc-toc"><h3><a href="#reexports">Crate Items</a></h3><ul class="block"><li><a href="#reexports" title="Re-exports">Re-exports</a></li><li><a href="#modules" title="Modules">Modules</a></li><li><a href="#macros" title="Macros">Macros</a></li><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#enums" title="Enums">Enums</a></li><li><a href="#constants" title="Constants">Constants</a></li><li><a href="#traits" title="Traits">Traits</a></li><li><a href="#functions" title="Functions">Functions</a></li><li><a href="#types" title="Type Aliases">Type Aliases</a></li></ul></section><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Crate <span>namada_state</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/namada_state/lib.rs.html#1-1371">source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Ledger’s state storage with key-value backed store and a merkle tree</p>
</div></details><h2 id="reexports" class="section-header">Re-exports<a href="#reexports" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name" id="reexport.merkle_tree"><code>pub use <a class="mod" href="../namada_merkle_tree/index.html" title="mod namada_merkle_tree">namada_merkle_tree</a> as merkle_tree;</code></div></li><li><div class="item-name" id="reexport.storage"><code>pub use <a class="mod" href="../namada_storage/index.html" title="mod namada_storage">namada_storage</a> as storage;</code></div></li></ul><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="collections/index.html" title="mod namada_state::collections">collections</a></div><div class="desc docblock-short">Lazy data structures for storage access where elements are not all loaded
into memory.</div></li><li><div class="item-name"><a class="mod" href="ics23_specs/index.html" title="mod namada_state::ics23_specs">ics23_<wbr>specs</a></div><div class="desc docblock-short">A module that contains</div></li><li><div class="item-name"><a class="mod" href="mockdb/index.html" title="mod namada_state::mockdb">mockdb</a></div><div class="desc docblock-short">DB mock for testing</div></li><li><div class="item-name"><a class="mod" href="prefix_iter/index.html" title="mod namada_state::prefix_iter">prefix_<wbr>iter</a></div><div class="desc docblock-short">The storage prefix iterators can be used to iterate over a common prefix of
storage keys.</div></li><li><div class="item-name"><a class="mod" href="tx_queue/index.html" title="mod namada_state::tx_queue">tx_<wbr>queue</a></div><div class="desc docblock-short">Transaction queue</div></li><li><div class="item-name"><a class="mod" href="write_log/index.html" title="mod namada_state::write_log">write_<wbr>log</a></div><div class="desc docblock-short">Write log is temporary storage for modifications performed by a transaction.
before they are committed to the ledger’s storage.</div></li></ul><h2 id="macros" class="section-header">Macros<a href="#macros" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="macro" href="macro.impl_storage_read.html" title="macro namada_state::impl_storage_read">impl_<wbr>storage_<wbr>read</a></div><div class="desc docblock-short">Implement [<code>trait StorageRead</code>] using its [<code>trait StateRead</code>]
implementation.</div></li><li><div class="item-name"><a class="macro" href="macro.impl_storage_write.html" title="macro namada_state::impl_storage_write">impl_<wbr>storage_<wbr>write</a></div><div class="desc docblock-short">Implement [<code>trait StorageWrite</code>] using its [<code>trait State</code>] implementation.</div></li></ul><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.BlockHash.html" title="struct namada_state::BlockHash">Block<wbr>Hash</a></div><div class="desc docblock-short">Hash of a block as fixed-size byte array</div></li><li><div class="item-name"><a class="struct" href="struct.BlockHeader.html" title="struct namada_state::BlockHeader">Block<wbr>Header</a></div><div class="desc docblock-short">The block header data from Tendermint header relevant for Namada storage</div></li><li><div class="item-name"><a class="struct" href="struct.BlockHeight.html" title="struct namada_state::BlockHeight">Block<wbr>Height</a></div><div class="desc docblock-short">Height of a block, i.e. the level. The <code>default</code> is the
<a href="struct.BlockHeight.html#method.sentinel" title="associated function namada_state::BlockHeight::sentinel"><code>BlockHeight::sentinel</code></a> value, which doesn’t correspond to any block.</div></li><li><div class="item-name"><a class="struct" href="struct.BlockResults.html" title="struct namada_state::BlockResults">Block<wbr>Results</a></div><div class="desc docblock-short">Represents the indices of the accepted transactions
in a block.</div></li><li><div class="item-name"><a class="struct" href="struct.BlockStateRead.html" title="struct namada_state::BlockStateRead">Block<wbr>State<wbr>Read</a></div><div class="desc docblock-short">The block’s state as stored in the database.</div></li><li><div class="item-name"><a class="struct" href="struct.BlockStateWrite.html" title="struct namada_state::BlockStateWrite">Block<wbr>State<wbr>Write</a></div><div class="desc docblock-short">The block’s state to write into the database.</div></li><li><div class="item-name"><a class="struct" href="struct.BlockStorage.html" title="struct namada_state::BlockStorage">Block<wbr>Storage</a></div><div class="desc docblock-short">The block storage data</div></li><li><div class="item-name"><a class="struct" href="struct.ConversionLeaf.html" title="struct namada_state::ConversionLeaf">Conversion<wbr>Leaf</a></div><div class="desc docblock-short">A representation of a leaf in the conversion tree</div></li><li><div class="item-name"><a class="struct" href="struct.ConversionState.html" title="struct namada_state::ConversionState">Conversion<wbr>State</a></div><div class="desc docblock-short">A representation of the conversion state</div></li><li><div class="item-name"><a class="struct" href="struct.Epoch.html" title="struct namada_state::Epoch">Epoch</a></div><div class="desc docblock-short">Epoch identifier. Epochs are identified by consecutive numbers.</div></li><li><div class="item-name"><a class="struct" href="struct.Epochs.html" title="struct namada_state::Epochs">Epochs</a></div><div class="desc docblock-short">Predecessor block epochs</div></li><li><div class="item-name"><a class="struct" href="struct.EthEventsQueue.html" title="struct namada_state::EthEventsQueue">EthEvents<wbr>Queue</a></div><div class="desc docblock-short">Container of all Ethereum event queues.</div></li><li><div class="item-name"><a class="struct" href="struct.FullAccessState.html" title="struct namada_state::FullAccessState">Full<wbr>Access<wbr>State</a></div><div class="desc docblock-short">Owned state with full R/W access.</div></li><li><div class="item-name"><a class="struct" href="struct.InMemory.html" title="struct namada_state::InMemory">InMemory</a></div><div class="desc docblock-short">The ledger’s state</div></li><li><div class="item-name"><a class="struct" href="struct.Key.html" title="struct namada_state::Key">Key</a></div><div class="desc docblock-short">A storage key is made of storage key segments <a href="../namada_core/storage/enum.DbKeySeg.html" title="enum namada_core::storage::DbKeySeg"><code>DbKeySeg</code></a>, separated by
<a href="../namada_core/storage/constant.KEY_SEGMENT_SEPARATOR.html" title="constant namada_core::storage::KEY_SEGMENT_SEPARATOR"><code>KEY_SEGMENT_SEPARATOR</code></a>.</div></li><li><div class="item-name"><a class="struct" href="struct.LastBlock.html" title="struct namada_state::LastBlock">Last<wbr>Block</a></div><div class="desc docblock-short">Last committed block</div></li><li><div class="item-name"><a class="struct" href="struct.MerkleTree.html" title="struct namada_state::MerkleTree">Merkle<wbr>Tree</a></div><div class="desc docblock-short">Merkle tree storage</div></li><li><div class="item-name"><a class="struct" href="struct.MerkleTreeStoresRead.html" title="struct namada_state::MerkleTreeStoresRead">Merkle<wbr>Tree<wbr>Stores<wbr>Read</a></div><div class="desc docblock-short">The root and store pairs to restore the trees</div></li><li><div class="item-name"><a class="struct" href="struct.MerkleTreeStoresWrite.html" title="struct namada_state::MerkleTreeStoresWrite">Merkle<wbr>Tree<wbr>Stores<wbr>Write</a></div><div class="desc docblock-short">The root and store pairs to be persistent</div></li><li><div class="item-name"><a class="struct" href="struct.PatternIterator.html" title="struct namada_state::PatternIterator">Pattern<wbr>Iterator</a></div><div class="desc docblock-short">Storage prefix iterator generic wrapper type.</div></li><li><div class="item-name"><a class="struct" href="struct.PrefixIter.html" title="struct namada_state::PrefixIter">Prefix<wbr>Iter</a></div><div class="desc docblock-short">Prefix iterator for <a href="trait.StorageRead.html" title="trait namada_state::StorageRead"><code>StorageRead</code></a> implementations.</div></li><li><div class="item-name"><a class="struct" href="struct.PrefixIterator.html" title="struct namada_state::PrefixIterator">Prefix<wbr>Iterator</a></div><div class="desc docblock-short">Storage prefix iterator generic wrapper type.</div></li><li><div class="item-name"><a class="struct" href="struct.Sha256Hasher.html" title="struct namada_state::Sha256Hasher">Sha256<wbr>Hasher</a></div><div class="desc docblock-short">The storage hasher used for the merkle tree.</div></li><li><div class="item-name"><a class="struct" href="struct.TempWlState.html" title="struct namada_state::TempWlState">Temp<wbr>WlState</a></div><div class="desc docblock-short">State with a temporary write log. This is used for dry-running txs and ABCI
prepare and processs proposal, which must not modify the actual state.</div></li><li><div class="item-name"><a class="struct" href="struct.TxHostEnvState.html" title="struct namada_state::TxHostEnvState">TxHost<wbr>EnvState</a></div><div class="desc docblock-short">State with mutable write log and gas metering for tx host env.</div></li><li><div class="item-name"><a class="struct" href="struct.TxIndex.html" title="struct namada_state::TxIndex">TxIndex</a></div><div class="desc docblock-short">Transaction index within block.</div></li><li><div class="item-name"><a class="struct" href="struct.VpHostEnvState.html" title="struct namada_state::VpHostEnvState">VpHost<wbr>EnvState</a></div><div class="desc docblock-short">Read-only state with gas metering for VP host env.</div></li><li><div class="item-name"><a class="struct" href="struct.WlState.html" title="struct namada_state::WlState">WlState</a></div><div class="desc docblock-short">State with a write-logged storage.</div></li></ul><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.DbError.html" title="enum namada_state::DbError">DbError</a></div></li><li><div class="item-name"><a class="enum" href="enum.Error.html" title="enum namada_state::Error">Error</a></div></li><li><div class="item-name"><a class="enum" href="enum.MembershipProof.html" title="enum namada_state::MembershipProof">Membership<wbr>Proof</a></div><div class="desc docblock-short">Type of membership proof from a merkle tree</div></li><li><div class="item-name"><a class="enum" href="enum.ProcessProposalCachedResult.html" title="enum namada_state::ProcessProposalCachedResult">Process<wbr>Proposal<wbr>Cached<wbr>Result</a></div><div class="desc docblock-short">The result of process proposal that can be cached for future lookup</div></li><li><div class="item-name"><a class="enum" href="enum.StateError.html" title="enum namada_state::StateError">State<wbr>Error</a></div></li><li><div class="item-name"><a class="enum" href="enum.StoreRef.html" title="enum namada_state::StoreRef">Store<wbr>Ref</a></div><div class="desc docblock-short">Pointer to backing storage of merkle tree</div></li><li><div class="item-name"><a class="enum" href="enum.StoreType.html" title="enum namada_state::StoreType">Store<wbr>Type</a></div><div class="desc docblock-short">Store types for the merkle tree</div></li></ul><h2 id="constants" class="section-header">Constants<a href="#constants" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="constant" href="constant.BLOCK_HASH_LENGTH.html" title="constant namada_state::BLOCK_HASH_LENGTH">BLOCK_<wbr>HASH_<wbr>LENGTH</a></div><div class="desc docblock-short">The length of the block hash</div></li><li><div class="item-name"><a class="constant" href="constant.BLOCK_HEIGHT_LENGTH.html" title="constant namada_state::BLOCK_HEIGHT_LENGTH">BLOCK_<wbr>HEIGHT_<wbr>LENGTH</a></div><div class="desc docblock-short">The length of the block height</div></li><li><div class="item-name"><a class="constant" href="constant.EPOCH_SWITCH_BLOCKS_DELAY.html" title="constant namada_state::EPOCH_SWITCH_BLOCKS_DELAY">EPOCH_<wbr>SWITCH_<wbr>BLOCKS_<wbr>DELAY</a></div><div class="desc docblock-short">We delay epoch change 2 blocks to keep it in sync with Tendermint, because
it has 2 blocks delay on validator set update.</div></li><li><div class="item-name"><a class="constant" href="constant.EPOCH_TYPE_LENGTH.html" title="constant namada_state::EPOCH_TYPE_LENGTH">EPOCH_<wbr>TYPE_<wbr>LENGTH</a></div><div class="desc docblock-short">The length of the epoch type</div></li></ul><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.DB.html" title="trait namada_state::DB">DB</a></div><div class="desc docblock-short">A database backend.</div></li><li><div class="item-name"><a class="trait" href="trait.DBIter.html" title="trait namada_state::DBIter">DBIter</a></div><div class="desc docblock-short">A database prefix iterator.</div></li><li><div class="item-name"><a class="trait" href="trait.DBWriteBatch.html" title="trait namada_state::DBWriteBatch">DBWrite<wbr>Batch</a></div><div class="desc docblock-short">Atomic batch write.</div></li><li><div class="item-name"><a class="trait" href="trait.KeySeg.html" title="trait namada_state::KeySeg">KeySeg</a></div><div class="desc docblock-short">Represents a segment in a path that may be used as a database key</div></li><li><div class="item-name"><a class="trait" href="trait.OptionExt.html" title="trait namada_state::OptionExt">Option<wbr>Ext</a></div><div class="desc docblock-short">An extension to <a href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option"><code>Option</code></a> to allow turning <code>None</code> case to an Error from a
static string (handy for WASM).</div></li><li><div class="item-name"><a class="trait" href="trait.ReadConversionState.html" title="trait namada_state::ReadConversionState">Read<wbr>Conversion<wbr>State</a></div><div class="desc docblock-short">Able to borrow conversion state.</div></li><li><div class="item-name"><a class="trait" href="trait.ResultExt.html" title="trait namada_state::ResultExt">Result<wbr>Ext</a></div><div class="desc docblock-short">Result extension to easily wrap custom errors into <a href="enum.Error.html" title="enum namada_state::Error"><code>Error</code></a>.</div></li><li><div class="item-name"><a class="trait" href="trait.State.html" title="trait namada_state::State">State</a></div><div class="desc docblock-short">Common trait for write log, DB and in-memory state.</div></li><li><div class="item-name"><a class="trait" href="trait.StateRead.html" title="trait namada_state::StateRead">State<wbr>Read</a></div><div class="desc docblock-short">Common trait for read-only access to write log, DB and in-memory state.</div></li><li><div class="item-name"><a class="trait" href="trait.StorageHasher.html" title="trait namada_state::StorageHasher">Storage<wbr>Hasher</a></div><div class="desc docblock-short">The storage hasher used for the merkle tree.</div></li><li><div class="item-name"><a class="trait" href="trait.StorageRead.html" title="trait namada_state::StorageRead">Storage<wbr>Read</a></div><div class="desc docblock-short">Common storage read interface</div></li><li><div class="item-name"><a class="trait" href="trait.StorageWrite.html" title="trait namada_state::StorageWrite">Storage<wbr>Write</a></div><div class="desc docblock-short">Common storage write interface</div></li><li><div class="item-name"><a class="trait" href="trait.TxWrites.html" title="trait namada_state::TxWrites">TxWrites</a></div><div class="desc docblock-short">Perform storage writes and deletions to write-log at tx level.</div></li><li><div class="item-name"><a class="trait" href="trait.WithConversionState.html" title="trait namada_state::WithConversionState">With<wbr>Conversion<wbr>State</a></div><div class="desc docblock-short">Able to borrow mutable conversion state.</div></li></ul><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.iter_prefix.html" title="fn namada_state::iter_prefix">iter_<wbr>prefix</a></div><div class="desc docblock-short">Iterate Borsh encoded items matching the given prefix, ordered by the
storage keys.</div></li><li><div class="item-name"><a class="fn" href="fn.iter_prefix_bytes.html" title="fn namada_state::iter_prefix_bytes">iter_<wbr>prefix_<wbr>bytes</a></div><div class="desc docblock-short">Iterate items matching the given prefix, ordered by the storage keys.</div></li><li><div class="item-name"><a class="fn" href="fn.iter_prefix_post.html" title="fn namada_state::iter_prefix_post">iter_<wbr>prefix_<wbr>post</a></div><div class="desc docblock-short">Iterate write-log storage items posterior to a tx execution, matching the
given prefix. Returns the iterator and gas cost.</div></li><li><div class="item-name"><a class="fn" href="fn.iter_prefix_pre.html" title="fn namada_state::iter_prefix_pre">iter_<wbr>prefix_<wbr>pre</a></div><div class="desc docblock-short">Iterate write-log storage items prior to a tx execution, matching the
given prefix. Returns the iterator and gas cost.</div></li><li><div class="item-name"><a class="fn" href="fn.iter_prefix_with_filter.html" title="fn namada_state::iter_prefix_with_filter">iter_<wbr>prefix_<wbr>with_<wbr>filter</a></div><div class="desc docblock-short">Iterate Borsh encoded items matching the given prefix and passing the given
<code>filter</code> predicate, ordered by the storage keys.</div></li></ul><h2 id="types" class="section-header">Type Aliases<a href="#types" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="type" href="type.DbResult.html" title="type namada_state::DbResult">DbResult</a></div><div class="desc docblock-short">A result of a function that may fail</div></li><li><div class="item-name"><a class="type" href="type.KVBytes.html" title="type namada_state::KVBytes">KVBytes</a></div><div class="desc docblock-short">A key-value pair as raw bytes</div></li><li><div class="item-name"><a class="type" href="type.Result.html" title="type namada_state::Result">Result</a></div><div class="desc docblock-short">Result of a storage API call.</div></li></ul></section></div></main></body></html>