<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A database backend."><title>DB in namada_state - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-b0742ba02757f159.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="namada_state" data-themes="" data-resource-suffix="" data-rustdoc-version="1.84.0-nightly (9322d183f 2024-10-14)" data-channel="nightly" data-search-js="search-e056c65ede92db13.js" data-settings-js="settings-805db61a62df4bd2.js" ><script src="../static.files/storage-1d39b6787ed640ff.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-f070b9041d14864c.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-0111fcff984fae8f.css"></noscript><link rel="icon" href="https://dev.namada.net/master/favicon.png"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button><a class="logo-container" href="../namada_state/index.html"><img src="https://dev.namada.net/master/rustdoc-logo.png" alt=""></a></nav><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../namada_state/index.html"><img src="https://dev.namada.net/master/rustdoc-logo.png" alt="logo"></a><h2><a href="../namada_state/index.html">namada_<wbr>state</a><span class="version">0.47.1</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">DB</a></h2><h3><a href="#required-associated-types">Required Associated Types</a></h3><ul class="block"><li><a href="#associatedtype.Cache" title="Cache">Cache</a></li><li><a href="#associatedtype.Migrator" title="Migrator">Migrator</a></li><li><a href="#associatedtype.RestoreSource" title="RestoreSource">RestoreSource</a></li><li><a href="#associatedtype.WriteBatch" title="WriteBatch">WriteBatch</a></li></ul><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.add_block_to_batch" title="add_block_to_batch">add_block_to_batch</a></li><li><a href="#tymethod.batch" title="batch">batch</a></li><li><a href="#tymethod.batch_delete_subspace_val" title="batch_delete_subspace_val">batch_delete_subspace_val</a></li><li><a href="#tymethod.batch_write_subspace_val" title="batch_write_subspace_val">batch_write_subspace_val</a></li><li><a href="#tymethod.delete_subspace_val" title="delete_subspace_val">delete_subspace_val</a></li><li><a href="#tymethod.exec_batch" title="exec_batch">exec_batch</a></li><li><a href="#tymethod.flush" title="flush">flush</a></li><li><a href="#tymethod.has_replay_protection_entry" title="has_replay_protection_entry">has_replay_protection_entry</a></li><li><a href="#tymethod.migrator" title="migrator">migrator</a></li><li><a href="#tymethod.move_current_replay_protection_entries" title="move_current_replay_protection_entries">move_current_replay_protection_entries</a></li><li><a href="#tymethod.open" title="open">open</a></li><li><a href="#tymethod.overwrite_entry" title="overwrite_entry">overwrite_entry</a></li><li><a href="#tymethod.prune_merkle_tree_store" title="prune_merkle_tree_store">prune_merkle_tree_store</a></li><li><a href="#tymethod.prune_non_persisted_diffs" title="prune_non_persisted_diffs">prune_non_persisted_diffs</a></li><li><a href="#tymethod.read_block_header" title="read_block_header">read_block_header</a></li><li><a href="#tymethod.read_bridge_pool_signed_nonce" title="read_bridge_pool_signed_nonce">read_bridge_pool_signed_nonce</a></li><li><a href="#tymethod.read_diffs_val" title="read_diffs_val">read_diffs_val</a></li><li><a href="#tymethod.read_last_block" title="read_last_block">read_last_block</a></li><li><a href="#tymethod.read_merkle_tree_stores" title="read_merkle_tree_stores">read_merkle_tree_stores</a></li><li><a href="#tymethod.read_subspace_val" title="read_subspace_val">read_subspace_val</a></li><li><a href="#tymethod.read_subspace_val_with_height" title="read_subspace_val_with_height">read_subspace_val_with_height</a></li><li><a href="#tymethod.restore_from" title="restore_from">restore_from</a></li><li><a href="#tymethod.update_last_block_merkle_tree" title="update_last_block_merkle_tree">update_last_block_merkle_tree</a></li><li><a href="#tymethod.write_replay_protection_entry" title="write_replay_protection_entry">write_replay_protection_entry</a></li><li><a href="#tymethod.write_subspace_val" title="write_subspace_val">write_subspace_val</a></li></ul><h3><a href="#provided-methods">Provided Methods</a></h3><ul class="block"><li><a href="#method.path" title="path">path</a></li></ul><h3><a href="#object-safety">Object Safety</a></h3><h3><a href="#implementors">Implementors</a></h3></section><div id="rustdoc-modnav"><h2 class="in-crate"><a href="index.html">In crate namada_<wbr>state</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><span class="rustdoc-breadcrumbs"><a href="index.html">namada_state</a></span><h1>Trait <span class="trait">DB</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/namada_storage/db.rs.html#119">source</a> </span></div><pre class="rust item-decl"><code>pub trait DB: <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a> {
    type <a href="#associatedtype.Cache" class="associatedtype">Cache</a>;
    type <a href="#associatedtype.WriteBatch" class="associatedtype">WriteBatch</a>: <a class="trait" href="trait.DBWriteBatch.html" title="trait namada_state::DBWriteBatch">DBWriteBatch</a>;
    type <a href="#associatedtype.Migrator" class="associatedtype">Migrator</a>: <a class="trait" href="../namada_storage/db/trait.DBUpdateVisitor.html" title="trait namada_storage::db::DBUpdateVisitor">DBUpdateVisitor</a>&lt;DB = Self&gt;;
    type <a href="#associatedtype.RestoreSource" class="associatedtype">RestoreSource</a>&lt;'a&gt;;

<details class="toggle type-contents-toggle"><summary class="hideme"><span>Show 26 methods</span></summary>    // Required methods
    fn <a href="#tymethod.open" class="fn">open</a>(db_path: impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/std/path/struct.Path.html" title="struct std::path::Path">Path</a>&gt;, cache: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;Self::<a class="associatedtype" href="trait.DB.html#associatedtype.Cache" title="type namada_state::DB::Cache">Cache</a>&gt;) -&gt; Self;
<span class="item-spacer"></span>    fn <a href="#tymethod.restore_from" class="fn">restore_from</a>(
        &amp;mut self,
        source: Self::<a class="associatedtype" href="trait.DB.html#associatedtype.RestoreSource" title="type namada_state::DB::RestoreSource">RestoreSource</a>&lt;'_&gt;,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="enum" href="enum.DbError.html" title="enum namada_state::DbError">Error</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.flush" class="fn">flush</a>(&amp;self, wait: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="enum" href="enum.DbError.html" title="enum namada_state::DbError">Error</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.read_last_block" class="fn">read_last_block</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="struct.BlockStateRead.html" title="struct namada_state::BlockStateRead">BlockStateRead</a>&gt;, <a class="enum" href="enum.DbError.html" title="enum namada_state::DbError">Error</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.add_block_to_batch" class="fn">add_block_to_batch</a>(
        &amp;self,
        state: <a class="struct" href="struct.BlockStateWrite.html" title="struct namada_state::BlockStateWrite">BlockStateWrite</a>&lt;'_&gt;,
        batch: &amp;mut Self::<a class="associatedtype" href="trait.DB.html#associatedtype.WriteBatch" title="type namada_state::DB::WriteBatch">WriteBatch</a>,
        is_full_commit: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="enum" href="enum.DbError.html" title="enum namada_state::DbError">Error</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.read_block_header" class="fn">read_block_header</a>(
        &amp;self,
        height: <a class="struct" href="struct.BlockHeight.html" title="struct namada_state::BlockHeight">BlockHeight</a>,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="struct.BlockHeader.html" title="struct namada_state::BlockHeader">BlockHeader</a>&gt;, <a class="enum" href="enum.DbError.html" title="enum namada_state::DbError">Error</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.read_merkle_tree_stores" class="fn">read_merkle_tree_stores</a>(
        &amp;self,
        epoch: <a class="struct" href="struct.Epoch.html" title="struct namada_state::Epoch">Epoch</a>,
        base_height: <a class="struct" href="struct.BlockHeight.html" title="struct namada_state::BlockHeight">BlockHeight</a>,
        store_type: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="enum" href="enum.StoreType.html" title="enum namada_state::StoreType">StoreType</a>&gt;,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="struct.MerkleTreeStoresRead.html" title="struct namada_state::MerkleTreeStoresRead">MerkleTreeStoresRead</a>&gt;, <a class="enum" href="enum.DbError.html" title="enum namada_state::DbError">Error</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.has_replay_protection_entry" class="fn">has_replay_protection_entry</a>(&amp;self, hash: &amp;<a class="struct" href="../namada_core/hash/struct.Hash.html" title="struct namada_core::hash::Hash">Hash</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>, <a class="enum" href="enum.DbError.html" title="enum namada_state::DbError">Error</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.read_subspace_val" class="fn">read_subspace_val</a>(&amp;self, key: &amp;<a class="struct" href="struct.Key.html" title="struct namada_state::Key">Key</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a>&gt;&gt;, <a class="enum" href="enum.DbError.html" title="enum namada_state::DbError">Error</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.read_subspace_val_with_height" class="fn">read_subspace_val_with_height</a>(
        &amp;self,
        key: &amp;<a class="struct" href="struct.Key.html" title="struct namada_state::Key">Key</a>,
        height: <a class="struct" href="struct.BlockHeight.html" title="struct namada_state::BlockHeight">BlockHeight</a>,
        last_height: <a class="struct" href="struct.BlockHeight.html" title="struct namada_state::BlockHeight">BlockHeight</a>,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a>&gt;&gt;, <a class="enum" href="enum.DbError.html" title="enum namada_state::DbError">Error</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.read_diffs_val" class="fn">read_diffs_val</a>(
        &amp;self,
        key: &amp;<a class="struct" href="struct.Key.html" title="struct namada_state::Key">Key</a>,
        height: <a class="struct" href="struct.BlockHeight.html" title="struct namada_state::BlockHeight">BlockHeight</a>,
        is_old: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a>&gt;&gt;, <a class="enum" href="enum.DbError.html" title="enum namada_state::DbError">Error</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.write_subspace_val" class="fn">write_subspace_val</a>(
        &amp;mut self,
        height: <a class="struct" href="struct.BlockHeight.html" title="struct namada_state::BlockHeight">BlockHeight</a>,
        key: &amp;<a class="struct" href="struct.Key.html" title="struct namada_state::Key">Key</a>,
        value: impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;[<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a>]&gt;,
        persist_diffs: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.i64.html">i64</a>, <a class="enum" href="enum.DbError.html" title="enum namada_state::DbError">Error</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.delete_subspace_val" class="fn">delete_subspace_val</a>(
        &amp;mut self,
        height: <a class="struct" href="struct.BlockHeight.html" title="struct namada_state::BlockHeight">BlockHeight</a>,
        key: &amp;<a class="struct" href="struct.Key.html" title="struct namada_state::Key">Key</a>,
        persist_diffs: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.i64.html">i64</a>, <a class="enum" href="enum.DbError.html" title="enum namada_state::DbError">Error</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.batch" class="fn">batch</a>() -&gt; Self::<a class="associatedtype" href="trait.DB.html#associatedtype.WriteBatch" title="type namada_state::DB::WriteBatch">WriteBatch</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.exec_batch" class="fn">exec_batch</a>(&amp;self, batch: Self::<a class="associatedtype" href="trait.DB.html#associatedtype.WriteBatch" title="type namada_state::DB::WriteBatch">WriteBatch</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="enum" href="enum.DbError.html" title="enum namada_state::DbError">Error</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.batch_write_subspace_val" class="fn">batch_write_subspace_val</a>(
        &amp;self,
        batch: &amp;mut Self::<a class="associatedtype" href="trait.DB.html#associatedtype.WriteBatch" title="type namada_state::DB::WriteBatch">WriteBatch</a>,
        height: <a class="struct" href="struct.BlockHeight.html" title="struct namada_state::BlockHeight">BlockHeight</a>,
        key: &amp;<a class="struct" href="struct.Key.html" title="struct namada_state::Key">Key</a>,
        value: impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;[<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a>]&gt;,
        persist_diffs: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.i64.html">i64</a>, <a class="enum" href="enum.DbError.html" title="enum namada_state::DbError">Error</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.batch_delete_subspace_val" class="fn">batch_delete_subspace_val</a>(
        &amp;self,
        batch: &amp;mut Self::<a class="associatedtype" href="trait.DB.html#associatedtype.WriteBatch" title="type namada_state::DB::WriteBatch">WriteBatch</a>,
        height: <a class="struct" href="struct.BlockHeight.html" title="struct namada_state::BlockHeight">BlockHeight</a>,
        key: &amp;<a class="struct" href="struct.Key.html" title="struct namada_state::Key">Key</a>,
        persist_diffs: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.i64.html">i64</a>, <a class="enum" href="enum.DbError.html" title="enum namada_state::DbError">Error</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.prune_merkle_tree_store" class="fn">prune_merkle_tree_store</a>(
        &amp;mut self,
        batch: &amp;mut Self::<a class="associatedtype" href="trait.DB.html#associatedtype.WriteBatch" title="type namada_state::DB::WriteBatch">WriteBatch</a>,
        store_type: &amp;<a class="enum" href="enum.StoreType.html" title="enum namada_state::StoreType">StoreType</a>,
        pruned_target: <a class="enum" href="../either/enum.Either.html" title="enum either::Either">Either</a>&lt;<a class="struct" href="struct.BlockHeight.html" title="struct namada_state::BlockHeight">BlockHeight</a>, <a class="struct" href="struct.Epoch.html" title="struct namada_state::Epoch">Epoch</a>&gt;,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="enum" href="enum.DbError.html" title="enum namada_state::DbError">Error</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.read_bridge_pool_signed_nonce" class="fn">read_bridge_pool_signed_nonce</a>(
        &amp;self,
        height: <a class="struct" href="struct.BlockHeight.html" title="struct namada_state::BlockHeight">BlockHeight</a>,
        last_height: <a class="struct" href="struct.BlockHeight.html" title="struct namada_state::BlockHeight">BlockHeight</a>,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../namada_core/ethereum_events/struct.Uint.html" title="struct namada_core::ethereum_events::Uint">Uint</a>&gt;, <a class="enum" href="enum.DbError.html" title="enum namada_state::DbError">Error</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.write_replay_protection_entry" class="fn">write_replay_protection_entry</a>(
        &amp;mut self,
        batch: &amp;mut Self::<a class="associatedtype" href="trait.DB.html#associatedtype.WriteBatch" title="type namada_state::DB::WriteBatch">WriteBatch</a>,
        key: &amp;<a class="struct" href="struct.Key.html" title="struct namada_state::Key">Key</a>,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="enum" href="enum.DbError.html" title="enum namada_state::DbError">Error</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.move_current_replay_protection_entries" class="fn">move_current_replay_protection_entries</a>(
        &amp;mut self,
        batch: &amp;mut Self::<a class="associatedtype" href="trait.DB.html#associatedtype.WriteBatch" title="type namada_state::DB::WriteBatch">WriteBatch</a>,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="enum" href="enum.DbError.html" title="enum namada_state::DbError">Error</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.prune_non_persisted_diffs" class="fn">prune_non_persisted_diffs</a>(
        &amp;mut self,
        batch: &amp;mut Self::<a class="associatedtype" href="trait.DB.html#associatedtype.WriteBatch" title="type namada_state::DB::WriteBatch">WriteBatch</a>,
        height: <a class="struct" href="struct.BlockHeight.html" title="struct namada_state::BlockHeight">BlockHeight</a>,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="enum" href="enum.DbError.html" title="enum namada_state::DbError">Error</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.overwrite_entry" class="fn">overwrite_entry</a>(
        &amp;self,
        batch: &amp;mut Self::<a class="associatedtype" href="trait.DB.html#associatedtype.WriteBatch" title="type namada_state::DB::WriteBatch">WriteBatch</a>,
        cf: &amp;<a class="enum" href="../namada_core/storage/enum.DbColFam.html" title="enum namada_core::storage::DbColFam">DbColFam</a>,
        key: &amp;<a class="struct" href="struct.Key.html" title="struct namada_state::Key">Key</a>,
        new_value: impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;[<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a>]&gt;,
        persist_diffs: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="enum" href="enum.DbError.html" title="enum namada_state::DbError">Error</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.migrator" class="fn">migrator</a>() -&gt; Self::<a class="associatedtype" href="trait.DB.html#associatedtype.Migrator" title="type namada_state::DB::Migrator">Migrator</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.update_last_block_merkle_tree" class="fn">update_last_block_merkle_tree</a>(
        &amp;self,
        merkle_tree_stores: <a class="struct" href="struct.MerkleTreeStoresWrite.html" title="struct namada_state::MerkleTreeStoresWrite">MerkleTreeStoresWrite</a>&lt;'_&gt;,
        is_full_commit: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="enum" href="enum.DbError.html" title="enum namada_state::DbError">Error</a>&gt;;

    // Provided method
    fn <a href="#method.path" class="fn">path</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;<a class="struct" href="https://doc.rust-lang.org/nightly/std/path/struct.Path.html" title="struct std::path::Path">Path</a>&gt; { ... }
</details>}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A database backend.</p>
</div></details><h2 id="required-associated-types" class="section-header">Required Associated Types<a href="#required-associated-types" class="anchor">§</a></h2><div class="methods"><details class="toggle" open><summary><section id="associatedtype.Cache" class="method"><a class="src rightside" href="../src/namada_storage/db.rs.html#121">source</a><h4 class="code-header">type <a href="#associatedtype.Cache" class="associatedtype">Cache</a></h4></section></summary><div class="docblock"><p>A DB’s cache</p>
</div></details><details class="toggle" open><summary><section id="associatedtype.WriteBatch" class="method"><a class="src rightside" href="../src/namada_storage/db.rs.html#123">source</a><h4 class="code-header">type <a href="#associatedtype.WriteBatch" class="associatedtype">WriteBatch</a>: <a class="trait" href="trait.DBWriteBatch.html" title="trait namada_state::DBWriteBatch">DBWriteBatch</a></h4></section></summary><div class="docblock"><p>A handle for batch writes</p>
</div></details><details class="toggle" open><summary><section id="associatedtype.Migrator" class="method"><a class="src rightside" href="../src/namada_storage/db.rs.html#126">source</a><h4 class="code-header">type <a href="#associatedtype.Migrator" class="associatedtype">Migrator</a>: <a class="trait" href="../namada_storage/db/trait.DBUpdateVisitor.html" title="trait namada_storage::db::DBUpdateVisitor">DBUpdateVisitor</a>&lt;DB = Self&gt;</h4></section></summary><div class="docblock"><p>A type placeholder for DB migration implementation.</p>
</div></details><details class="toggle" open><summary><section id="associatedtype.RestoreSource" class="method"><a class="src rightside" href="../src/namada_storage/db.rs.html#129">source</a><h4 class="code-header">type <a href="#associatedtype.RestoreSource" class="associatedtype">RestoreSource</a>&lt;'a&gt;</h4></section></summary><div class="docblock"><p>Source data to restore a database.</p>
</div></details></div><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.open" class="method"><a class="src rightside" href="../src/namada_storage/db.rs.html#132-135">source</a><h4 class="code-header">fn <a href="#tymethod.open" class="fn">open</a>(db_path: impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/std/path/struct.Path.html" title="struct std::path::Path">Path</a>&gt;, cache: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;Self::<a class="associatedtype" href="trait.DB.html#associatedtype.Cache" title="type namada_state::DB::Cache">Cache</a>&gt;) -&gt; Self</h4></section></summary><div class="docblock"><p>Open the database from provided path</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.restore_from" class="method"><a class="src rightside" href="../src/namada_storage/db.rs.html#139">source</a><h4 class="code-header">fn <a href="#tymethod.restore_from" class="fn">restore_from</a>(&amp;mut self, source: Self::<a class="associatedtype" href="trait.DB.html#associatedtype.RestoreSource" title="type namada_state::DB::RestoreSource">RestoreSource</a>&lt;'_&gt;) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="enum" href="enum.DbError.html" title="enum namada_state::DbError">Error</a>&gt;</h4></section></summary><div class="docblock"><p>Overwrite the contents of the current database
with the data read from <code>source</code>.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.flush" class="method"><a class="src rightside" href="../src/namada_storage/db.rs.html#148">source</a><h4 class="code-header">fn <a href="#tymethod.flush" class="fn">flush</a>(&amp;self, wait: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="enum" href="enum.DbError.html" title="enum namada_state::DbError">Error</a>&gt;</h4></section></summary><div class="docblock"><p>Flush data on the memory to persistent them</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.read_last_block" class="method"><a class="src rightside" href="../src/namada_storage/db.rs.html#151">source</a><h4 class="code-header">fn <a href="#tymethod.read_last_block" class="fn">read_last_block</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="struct.BlockStateRead.html" title="struct namada_state::BlockStateRead">BlockStateRead</a>&gt;, <a class="enum" href="enum.DbError.html" title="enum namada_state::DbError">Error</a>&gt;</h4></section></summary><div class="docblock"><p>Read the last committed block’s metadata</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.add_block_to_batch" class="method"><a class="src rightside" href="../src/namada_storage/db.rs.html#155-160">source</a><h4 class="code-header">fn <a href="#tymethod.add_block_to_batch" class="fn">add_block_to_batch</a>(
    &amp;self,
    state: <a class="struct" href="struct.BlockStateWrite.html" title="struct namada_state::BlockStateWrite">BlockStateWrite</a>&lt;'_&gt;,
    batch: &amp;mut Self::<a class="associatedtype" href="trait.DB.html#associatedtype.WriteBatch" title="type namada_state::DB::WriteBatch">WriteBatch</a>,
    is_full_commit: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="enum" href="enum.DbError.html" title="enum namada_state::DbError">Error</a>&gt;</h4></section></summary><div class="docblock"><p>Write block’s metadata. Merkle tree sub-stores are committed only when
<code>is_full_commit</code> is <code>true</code> (typically on a beginning of a new epoch).</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.read_block_header" class="method"><a class="src rightside" href="../src/namada_storage/db.rs.html#163-166">source</a><h4 class="code-header">fn <a href="#tymethod.read_block_header" class="fn">read_block_header</a>(
    &amp;self,
    height: <a class="struct" href="struct.BlockHeight.html" title="struct namada_state::BlockHeight">BlockHeight</a>,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="struct.BlockHeader.html" title="struct namada_state::BlockHeader">BlockHeader</a>&gt;, <a class="enum" href="enum.DbError.html" title="enum namada_state::DbError">Error</a>&gt;</h4></section></summary><div class="docblock"><p>Read the block header with the given height from the DB</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.read_merkle_tree_stores" class="method"><a class="src rightside" href="../src/namada_storage/db.rs.html#171-176">source</a><h4 class="code-header">fn <a href="#tymethod.read_merkle_tree_stores" class="fn">read_merkle_tree_stores</a>(
    &amp;self,
    epoch: <a class="struct" href="struct.Epoch.html" title="struct namada_state::Epoch">Epoch</a>,
    base_height: <a class="struct" href="struct.BlockHeight.html" title="struct namada_state::BlockHeight">BlockHeight</a>,
    store_type: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="enum" href="enum.StoreType.html" title="enum namada_state::StoreType">StoreType</a>&gt;,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="struct.MerkleTreeStoresRead.html" title="struct namada_state::MerkleTreeStoresRead">MerkleTreeStoresRead</a>&gt;, <a class="enum" href="enum.DbError.html" title="enum namada_state::DbError">Error</a>&gt;</h4></section></summary><div class="docblock"><p>Read the merkle tree stores with the given epoch. If a store_type is
given, it reads only the specified tree. Otherwise, it reads all
trees, but some subtrees could be empty if the stores aren’t saved.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.has_replay_protection_entry" class="method"><a class="src rightside" href="../src/namada_storage/db.rs.html#179">source</a><h4 class="code-header">fn <a href="#tymethod.has_replay_protection_entry" class="fn">has_replay_protection_entry</a>(&amp;self, hash: &amp;<a class="struct" href="../namada_core/hash/struct.Hash.html" title="struct namada_core::hash::Hash">Hash</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>, <a class="enum" href="enum.DbError.html" title="enum namada_state::DbError">Error</a>&gt;</h4></section></summary><div class="docblock"><p>Check if the given replay protection entry exists</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.read_subspace_val" class="method"><a class="src rightside" href="../src/namada_storage/db.rs.html#182">source</a><h4 class="code-header">fn <a href="#tymethod.read_subspace_val" class="fn">read_subspace_val</a>(&amp;self, key: &amp;<a class="struct" href="struct.Key.html" title="struct namada_state::Key">Key</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a>&gt;&gt;, <a class="enum" href="enum.DbError.html" title="enum namada_state::DbError">Error</a>&gt;</h4></section></summary><div class="docblock"><p>Read the latest value for account subspace key from the DB</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.read_subspace_val_with_height" class="method"><a class="src rightside" href="../src/namada_storage/db.rs.html#188-193">source</a><h4 class="code-header">fn <a href="#tymethod.read_subspace_val_with_height" class="fn">read_subspace_val_with_height</a>(
    &amp;self,
    key: &amp;<a class="struct" href="struct.Key.html" title="struct namada_state::Key">Key</a>,
    height: <a class="struct" href="struct.BlockHeight.html" title="struct namada_state::BlockHeight">BlockHeight</a>,
    last_height: <a class="struct" href="struct.BlockHeight.html" title="struct namada_state::BlockHeight">BlockHeight</a>,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a>&gt;&gt;, <a class="enum" href="enum.DbError.html" title="enum namada_state::DbError">Error</a>&gt;</h4></section></summary><div class="docblock"><p>Read the value for account subspace key at the given height from the DB.
In our <code>PersistentStorage</code> (rocksdb), to find a value from arbitrary
height requires looking for diffs from the given <code>height</code>, possibly
up to the <code>last_height</code>.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.read_diffs_val" class="method"><a class="src rightside" href="../src/namada_storage/db.rs.html#197-202">source</a><h4 class="code-header">fn <a href="#tymethod.read_diffs_val" class="fn">read_diffs_val</a>(
    &amp;self,
    key: &amp;<a class="struct" href="struct.Key.html" title="struct namada_state::Key">Key</a>,
    height: <a class="struct" href="struct.BlockHeight.html" title="struct namada_state::BlockHeight">BlockHeight</a>,
    is_old: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a>&gt;&gt;, <a class="enum" href="enum.DbError.html" title="enum namada_state::DbError">Error</a>&gt;</h4></section></summary><div class="docblock"><p>Read the value for the account diffs at the corresponding height from
the DB</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.write_subspace_val" class="method"><a class="src rightside" href="../src/namada_storage/db.rs.html#207-213">source</a><h4 class="code-header">fn <a href="#tymethod.write_subspace_val" class="fn">write_subspace_val</a>(
    &amp;mut self,
    height: <a class="struct" href="struct.BlockHeight.html" title="struct namada_state::BlockHeight">BlockHeight</a>,
    key: &amp;<a class="struct" href="struct.Key.html" title="struct namada_state::Key">Key</a>,
    value: impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;[<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a>]&gt;,
    persist_diffs: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.i64.html">i64</a>, <a class="enum" href="enum.DbError.html" title="enum namada_state::DbError">Error</a>&gt;</h4></section></summary><div class="docblock"><p>Write the value with the given height and account subspace key to the
DB. Returns the size difference from previous value, if any, or the
size of the value otherwise.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.delete_subspace_val" class="method"><a class="src rightside" href="../src/namada_storage/db.rs.html#218-223">source</a><h4 class="code-header">fn <a href="#tymethod.delete_subspace_val" class="fn">delete_subspace_val</a>(
    &amp;mut self,
    height: <a class="struct" href="struct.BlockHeight.html" title="struct namada_state::BlockHeight">BlockHeight</a>,
    key: &amp;<a class="struct" href="struct.Key.html" title="struct namada_state::Key">Key</a>,
    persist_diffs: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.i64.html">i64</a>, <a class="enum" href="enum.DbError.html" title="enum namada_state::DbError">Error</a>&gt;</h4></section></summary><div class="docblock"><p>Delete the value with the given height and account subspace key from the
DB. Returns the size of the removed value, if any, 0 if no previous
value was found.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.batch" class="method"><a class="src rightside" href="../src/namada_storage/db.rs.html#226">source</a><h4 class="code-header">fn <a href="#tymethod.batch" class="fn">batch</a>() -&gt; Self::<a class="associatedtype" href="trait.DB.html#associatedtype.WriteBatch" title="type namada_state::DB::WriteBatch">WriteBatch</a></h4></section></summary><div class="docblock"><p>Start write batch.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.exec_batch" class="method"><a class="src rightside" href="../src/namada_storage/db.rs.html#229">source</a><h4 class="code-header">fn <a href="#tymethod.exec_batch" class="fn">exec_batch</a>(&amp;self, batch: Self::<a class="associatedtype" href="trait.DB.html#associatedtype.WriteBatch" title="type namada_state::DB::WriteBatch">WriteBatch</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="enum" href="enum.DbError.html" title="enum namada_state::DbError">Error</a>&gt;</h4></section></summary><div class="docblock"><p>Execute write batch.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.batch_write_subspace_val" class="method"><a class="src rightside" href="../src/namada_storage/db.rs.html#234-241">source</a><h4 class="code-header">fn <a href="#tymethod.batch_write_subspace_val" class="fn">batch_write_subspace_val</a>(
    &amp;self,
    batch: &amp;mut Self::<a class="associatedtype" href="trait.DB.html#associatedtype.WriteBatch" title="type namada_state::DB::WriteBatch">WriteBatch</a>,
    height: <a class="struct" href="struct.BlockHeight.html" title="struct namada_state::BlockHeight">BlockHeight</a>,
    key: &amp;<a class="struct" href="struct.Key.html" title="struct namada_state::Key">Key</a>,
    value: impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;[<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a>]&gt;,
    persist_diffs: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.i64.html">i64</a>, <a class="enum" href="enum.DbError.html" title="enum namada_state::DbError">Error</a>&gt;</h4></section></summary><div class="docblock"><p>Batch write the value with the given height and account subspace key to
the DB. Returns the size difference from previous value, if any, or
the size of the value otherwise.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.batch_delete_subspace_val" class="method"><a class="src rightside" href="../src/namada_storage/db.rs.html#246-252">source</a><h4 class="code-header">fn <a href="#tymethod.batch_delete_subspace_val" class="fn">batch_delete_subspace_val</a>(
    &amp;self,
    batch: &amp;mut Self::<a class="associatedtype" href="trait.DB.html#associatedtype.WriteBatch" title="type namada_state::DB::WriteBatch">WriteBatch</a>,
    height: <a class="struct" href="struct.BlockHeight.html" title="struct namada_state::BlockHeight">BlockHeight</a>,
    key: &amp;<a class="struct" href="struct.Key.html" title="struct namada_state::Key">Key</a>,
    persist_diffs: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.i64.html">i64</a>, <a class="enum" href="enum.DbError.html" title="enum namada_state::DbError">Error</a>&gt;</h4></section></summary><div class="docblock"><p>Batch delete the value with the given height and account subspace key
from the DB. Returns the size of the removed value, if any, 0 if no
previous value was found.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.prune_merkle_tree_store" class="method"><a class="src rightside" href="../src/namada_storage/db.rs.html#255-260">source</a><h4 class="code-header">fn <a href="#tymethod.prune_merkle_tree_store" class="fn">prune_merkle_tree_store</a>(
    &amp;mut self,
    batch: &amp;mut Self::<a class="associatedtype" href="trait.DB.html#associatedtype.WriteBatch" title="type namada_state::DB::WriteBatch">WriteBatch</a>,
    store_type: &amp;<a class="enum" href="enum.StoreType.html" title="enum namada_state::StoreType">StoreType</a>,
    pruned_target: <a class="enum" href="../either/enum.Either.html" title="enum either::Either">Either</a>&lt;<a class="struct" href="struct.BlockHeight.html" title="struct namada_state::BlockHeight">BlockHeight</a>, <a class="struct" href="struct.Epoch.html" title="struct namada_state::Epoch">Epoch</a>&gt;,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="enum" href="enum.DbError.html" title="enum namada_state::DbError">Error</a>&gt;</h4></section></summary><div class="docblock"><p>Prune Merkle tree stores at the given epoch</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.read_bridge_pool_signed_nonce" class="method"><a class="src rightside" href="../src/namada_storage/db.rs.html#263-267">source</a><h4 class="code-header">fn <a href="#tymethod.read_bridge_pool_signed_nonce" class="fn">read_bridge_pool_signed_nonce</a>(
    &amp;self,
    height: <a class="struct" href="struct.BlockHeight.html" title="struct namada_state::BlockHeight">BlockHeight</a>,
    last_height: <a class="struct" href="struct.BlockHeight.html" title="struct namada_state::BlockHeight">BlockHeight</a>,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../namada_core/ethereum_events/struct.Uint.html" title="struct namada_core::ethereum_events::Uint">Uint</a>&gt;, <a class="enum" href="enum.DbError.html" title="enum namada_state::DbError">Error</a>&gt;</h4></section></summary><div class="docblock"><p>Read the signed nonce of Bridge Pool</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.write_replay_protection_entry" class="method"><a class="src rightside" href="../src/namada_storage/db.rs.html#270-274">source</a><h4 class="code-header">fn <a href="#tymethod.write_replay_protection_entry" class="fn">write_replay_protection_entry</a>(
    &amp;mut self,
    batch: &amp;mut Self::<a class="associatedtype" href="trait.DB.html#associatedtype.WriteBatch" title="type namada_state::DB::WriteBatch">WriteBatch</a>,
    key: &amp;<a class="struct" href="struct.Key.html" title="struct namada_state::Key">Key</a>,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="enum" href="enum.DbError.html" title="enum namada_state::DbError">Error</a>&gt;</h4></section></summary><div class="docblock"><p>Write a replay protection entry</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.move_current_replay_protection_entries" class="method"><a class="src rightside" href="../src/namada_storage/db.rs.html#277-280">source</a><h4 class="code-header">fn <a href="#tymethod.move_current_replay_protection_entries" class="fn">move_current_replay_protection_entries</a>(
    &amp;mut self,
    batch: &amp;mut Self::<a class="associatedtype" href="trait.DB.html#associatedtype.WriteBatch" title="type namada_state::DB::WriteBatch">WriteBatch</a>,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="enum" href="enum.DbError.html" title="enum namada_state::DbError">Error</a>&gt;</h4></section></summary><div class="docblock"><p>Move the current replay protection bucket to the general one</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.prune_non_persisted_diffs" class="method"><a class="src rightside" href="../src/namada_storage/db.rs.html#283-287">source</a><h4 class="code-header">fn <a href="#tymethod.prune_non_persisted_diffs" class="fn">prune_non_persisted_diffs</a>(
    &amp;mut self,
    batch: &amp;mut Self::<a class="associatedtype" href="trait.DB.html#associatedtype.WriteBatch" title="type namada_state::DB::WriteBatch">WriteBatch</a>,
    height: <a class="struct" href="struct.BlockHeight.html" title="struct namada_state::BlockHeight">BlockHeight</a>,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="enum" href="enum.DbError.html" title="enum namada_state::DbError">Error</a>&gt;</h4></section></summary><div class="docblock"><p>Prune non-persisted diffs that are only kept for one block for rollback</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.overwrite_entry" class="method"><a class="src rightside" href="../src/namada_storage/db.rs.html#291-298">source</a><h4 class="code-header">fn <a href="#tymethod.overwrite_entry" class="fn">overwrite_entry</a>(
    &amp;self,
    batch: &amp;mut Self::<a class="associatedtype" href="trait.DB.html#associatedtype.WriteBatch" title="type namada_state::DB::WriteBatch">WriteBatch</a>,
    cf: &amp;<a class="enum" href="../namada_core/storage/enum.DbColFam.html" title="enum namada_core::storage::DbColFam">DbColFam</a>,
    key: &amp;<a class="struct" href="struct.Key.html" title="struct namada_state::Key">Key</a>,
    new_value: impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;[<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a>]&gt;,
    persist_diffs: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="enum" href="enum.DbError.html" title="enum namada_state::DbError">Error</a>&gt;</h4></section></summary><div class="docblock"><p>Overwrite a new value in storage, taking into
account values stored at a previous height</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.migrator" class="method"><a class="src rightside" href="../src/namada_storage/db.rs.html#301">source</a><h4 class="code-header">fn <a href="#tymethod.migrator" class="fn">migrator</a>() -&gt; Self::<a class="associatedtype" href="trait.DB.html#associatedtype.Migrator" title="type namada_state::DB::Migrator">Migrator</a></h4></section></summary><div class="docblock"><p>Get an instance of DB migrator</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.update_last_block_merkle_tree" class="method"><a class="src rightside" href="../src/namada_storage/db.rs.html#304-308">source</a><h4 class="code-header">fn <a href="#tymethod.update_last_block_merkle_tree" class="fn">update_last_block_merkle_tree</a>(
    &amp;self,
    merkle_tree_stores: <a class="struct" href="struct.MerkleTreeStoresWrite.html" title="struct namada_state::MerkleTreeStoresWrite">MerkleTreeStoresWrite</a>&lt;'_&gt;,
    is_full_commit: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="enum" href="enum.DbError.html" title="enum namada_state::DbError">Error</a>&gt;</h4></section></summary><div class="docblock"><p>Update the merkle tree written for the committed last block</p>
</div></details></div><h2 id="provided-methods" class="section-header">Provided Methods<a href="#provided-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="method.path" class="method"><a class="src rightside" href="../src/namada_storage/db.rs.html#143">source</a><h4 class="code-header">fn <a href="#method.path" class="fn">path</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;<a class="struct" href="https://doc.rust-lang.org/nightly/std/path/struct.Path.html" title="struct std::path::Path">Path</a>&gt;</h4></section></summary><div class="docblock"><p>Get the path to the db in the filesystem,
if it exists (the DB may be in-memory only)</p>
</div></details></div><h2 id="object-safety" class="section-header">Object Safety<a href="#object-safety" class="anchor">§</a></h2><div class="object-safety-info">This trait is <b>not</b> <a href="https://doc.rust-lang.org/nightly/reference/items/traits.html#object-safety">object safe</a>.</div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"><details class="toggle implementors-toggle"><summary><section id="impl-DB-for-MockDB" class="impl"><a class="src rightside" href="../src/namada_storage/mockdb.rs.html#98">source</a><a href="#impl-DB-for-MockDB" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="trait.DB.html" title="trait namada_state::DB">DB</a> for <a class="struct" href="mockdb/struct.MockDB.html" title="struct namada_state::mockdb::MockDB">MockDB</a></h3></section></summary><div class="impl-items"><section id="associatedtype.Cache-1" class="associatedtype trait-impl"><a class="src rightside" href="../src/namada_storage/mockdb.rs.html#100">source</a><a href="#associatedtype.Cache-1" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.Cache" class="associatedtype">Cache</a> = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a></h4></section><section id="associatedtype.Migrator-1" class="associatedtype trait-impl"><a class="src rightside" href="../src/namada_storage/mockdb.rs.html#101">source</a><a href="#associatedtype.Migrator-1" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.Migrator" class="associatedtype">Migrator</a> = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a></h4></section><section id="associatedtype.RestoreSource-1" class="associatedtype trait-impl"><a class="src rightside" href="../src/namada_storage/mockdb.rs.html#102">source</a><a href="#associatedtype.RestoreSource-1" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.RestoreSource" class="associatedtype">RestoreSource</a>&lt;'a&gt; = <a class="enum" href="mockdb/enum.MockDBRestoreSource.html" title="enum namada_state::mockdb::MockDBRestoreSource">MockDBRestoreSource</a></h4></section><section id="associatedtype.WriteBatch-1" class="associatedtype trait-impl"><a class="src rightside" href="../src/namada_storage/mockdb.rs.html#103">source</a><a href="#associatedtype.WriteBatch-1" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.WriteBatch" class="associatedtype">WriteBatch</a> = <a class="struct" href="mockdb/struct.MockDBWriteBatch.html" title="struct namada_state::mockdb::MockDBWriteBatch">MockDBWriteBatch</a></h4></section></div></details></div><script src="../trait.impl/namada_storage/db/trait.DB.js" data-ignore-extern-crates="namada_storage" async></script></section></div></main></body></html>